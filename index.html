<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>XGZ123åšå®¢</title>

  
  <meta name="author" content="XGZ">
  

  
  <meta name="description" content="å­¦ä¹ è®°å½•">
  

  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  

  <meta property="og:site_name" content="XGZ123åšå®¢"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="XGZ123åšå®¢" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
</head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">XGZ123åšå®¢</a>
    </h1>
    <p class="site-description"></p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/">Home</a></li>
      
        <li><a href="/archives">Archives</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    
  <article>

  
    
    <h3 class="article-title"><a href="/2017/05/03/using-resolve-to-calculate-module-relative-file-paths/"><span>ä½¿ç”¨ require.resolve() æ¥è®¡ç®— Node.js ç›¸å¯¹äºæ¨¡å—çš„æ–‡ä»¶è·¯å¾„</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2017/05/03/using-resolve-to-calculate-module-relative-file-paths/" rel="bookmark">
        <time class="entry-date published" datetime="2017-05-03T14:31:54.000Z">
          2017-05-03
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p><a href="https://www.bennadel.com/blog/3243-using-require-resolve-to-calculate-module-relative-file-paths-in-node-js.htm" target="_blank" rel="external">åŸæ–‡</a> by  <a href="https://plus.google.com/108976367067760160494?rel=author" target="_blank" rel="external">Ben Nadel</a></p>
<p>è¿™ä¸ªå‘¨æœ«ï¼Œæˆ‘å¼€å§‹çœ‹ <code>Express.js</code> - è¿™ä¸ªï¼ˆåº”è¯¥æ˜¯ï¼‰<code>Node.js</code> æœ€è€ä¸”æœ€æµè¡Œçš„ç½‘ç»œæ¡†æ¶äº†ã€‚<code>Node.js</code> æˆ‘å·²ç»ç”¨äº†å‡ å¹´äº†ï¼Œä½†æˆ‘ä»æœªçœŸæ­£æ„å»ºè¿‡ä¸€ä¸ªå®Œæ•´çš„ç½‘ç»œåº”ç”¨ã€‚å½“æˆ‘é˜…è¯»çš„æ—¶å€™ï¼Œé‡åˆ°äº†ä»æœªè§è¿‡çš„ â€“ <a href="https://strongloop.com/strongblog/bypassing-express-view-rendering-for-speed-and-modularity/" target="_blank" rel="external">ä¸€ç¯‡ <code>StrongLoop</code> çš„æ–‡ç« </a> ä½¿ç”¨ <code>require.resolve</code> æ¥è®¡ç®—ç›¸å¯¹äºæ¨¡å—çš„æ–‡ä»¶è·¯å¾„ã€‚ä»¥å‰ï¼Œæˆ‘åªç”¨è¿‡æ¨¡å—çš„æœ¬åœ°å˜é‡ <code>__dirname</code> æ¥è®¡ç®—ç›¸å¯¹äºæ¨¡å—çš„æ–‡ä»¶è·¯å¾„ã€‚</p>
<p>åœ¨ <code>Node.js</code> é‡Œï¼Œ<a href="https://www.bennadel.com/blog/2169-where-does-node-js-and-require-look-for-modules.htm" target="_blank" rel="external">æ¨¡å—åŠ è½½å™¨ - <code>require()</code> - å¯ä»¥ä½¿ç”¨ç›¸å¯¹äºæ¨¡å—çš„è·¯å¾„</a>ã€‚ä¾‹å¦‚ï¼Œåœ¨æ–‡ä»¶ç³»ç»Ÿçš„ä»»æ„ç›®å½•ï¼Œæœ‰ä¸€ä¸ªæ¨¡å—éœ€è¦åŠ è½½è‡ªå·±çš„åº“ï¼Œå¯ä»¥å®‰å…¨åœ°ä½¿ç”¨ç›¸å¯¹äºæ¨¡å—çš„æ–‡ä»¶è·¯å¾„æ¥å¼•ç”¨è¿™ä¸ªåº“:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>(<span class="string">"../lib/thinger"</span>)</div></pre></td></tr></table></figure>
<p>ä¸ä½¿ç”¨æ¨¡å—åŠ è½½å™¨çš„æ—¶å€™ï¼Œæ–‡ä»¶è·¯å¾„ä¸€èˆ¬è¦æ±‚æ˜¯ç»å¯¹æˆ–è€…ç›¸å¯¹äºåº”ç”¨æ‰§è¡Œç¯å¢ƒçš„æ ¹ç›®å½•çš„ã€‚ä¾‹å¦‚ï¼Œè¯»å–æ–‡ä»¶å†…å®¹æ—¶ï¼Œéœ€è¦ç»™ <code>fs.readFileSync</code> æ–¹æ³•æä¾›ä¸€ä¸ªéæœ¬åœ°çš„è·¯å¾„ã€‚æˆ‘å¸¸ä½¿ç”¨ <code>__dirname</code> å˜é‡ä½œä¸ºè®¡ç®—éæœ¬åœ°è·¯å¾„çš„æ–¹æ³•ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fs.readFileSync(path.join(__dirname, <span class="string">"local-file.txt"</span>))</div></pre></td></tr></table></figure>
<p>è¿™ä¼šäº§ç”Ÿä¸€ä¸ªç”±æ¨¡å—ç›®å½•å’Œæä¾›çš„æ–‡ä»¶åæ‹¼æ¥è€Œæˆçš„è·¯å¾„ã€‚è¿™ç§æ–¹æ³•æ²¡æ¯›ç—…ï¼Œä½†æ˜¯ï¼Œå¦‚æœèƒ½æ›´è‡ªç„¶åœ°è®¡ç®—ç›¸å¯¹äºæ¨¡å—çš„æ–‡ä»¶è·¯å¾„å°±æ›´å¥½äº†ã€‚è¿™ä¹Ÿæ˜¯ <code>require.ensure()</code> å¸å¼•æˆ‘çœ¼çƒçš„åŸå› ã€‚<code>require.ensure()</code> <a href="https://www.bennadel.com/blog/2169-where-does-node-js-and-require-look-for-modules.htm" target="_blank" rel="external">ä½¿ç”¨å’Œ <code>require</code> ç›¸åŒçš„æœºåˆ¶æ¥åŠ è½½æ¨¡å—</a> â€“ ä¹Ÿå°±æ˜¯è¯´å®ƒå¯ä»¥ä½¿ç”¨ç›¸å¯¹äºæ¨¡å—çš„æ–‡ä»¶è·¯å¾„ï¼›ä½†æ˜¯ï¼Œå®ƒå¹¶ä¸åŠ è½½æ¨¡å—ï¼Œè€Œæ˜¯åªè¿”å›è¡¨æ˜æ¨¡å—çš„æ–‡ä»¶è·¯å¾„ã€‚<del>æ¨¡å—çš„ç›¸å¯¹è·¯å¾„å³ç»å¯¹è·¯å¾„</del>å°±å¯ä»¥ç”¨æ¥ï¼Œä¾‹å¦‚ï¼Œè¯»å–æ‰€ä»£è¡¨æ¨¡å—çš„å†…å®¹ã€‚</p>
<p>å®è·µä¸€ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªç®€å•çš„æ¨¡å—ï¼Œæ¥å®šä½å’Œè¯»å–åŒç›®å½•ä¸‹çš„ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹ã€‚ä½†æ˜¯ï¼Œä¸ºäº†ç¡®ä¿ä¸ä¼šåˆ›å»ºç›¸å¯¹äºæ ¹ç›®å½•çš„æ–‡ä»¶è·¯å¾„ï¼Œæœ¬æ¨¡å—ä»å­ç›®å½•åŠ è½½ demoã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// We want to request a module in a sub-directory so that module-relative paths aren't</span></div><div class="line"><span class="comment">// accidentally ALSO RELATIVE to the root of the application.</span></div><div class="line"><span class="built_in">require</span>( <span class="string">"./sub/test"</span> );</div></pre></td></tr></table></figure>
<p>ç„¶åï¼Œä»å­ç›®å½•çš„ demo æ¨¡å—ï¼Œæˆ‘ä½¿ç”¨ <code>__dirname</code> å’Œ <code>require.resolve()</code> æ¥ç”Ÿæˆç›¸å¯¹äºæ¨¡å—çš„æ–‡ä»¶è·¯å¾„:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">// Require the core node modules.</span></div><div class="line"><span class="keyword">var</span> chalk = <span class="built_in">require</span>( <span class="string">"chalk"</span> );</div><div class="line"><span class="keyword">var</span> fileSystem = <span class="built_in">require</span>( <span class="string">"fs"</span> );</div><div class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>( <span class="string">"path"</span> );</div><div class="line"></div><div class="line"><span class="comment">// ----------------------------------------------------------------------------------- //</span></div><div class="line"><span class="comment">// ----------------------------------------------------------------------------------- //</span></div><div class="line"></div><div class="line"><span class="comment">// Traditionally, I have used the "__dirname" as a way to calculate module-relative</span></div><div class="line"><span class="comment">// paths since "__dirname" provides the absolute path to the current module directory.</span></div><div class="line"><span class="comment">// That way, any relative-path appended to the "__dirname" generates a module-relative</span></div><div class="line"><span class="comment">// path to the given location.</span></div><div class="line"><span class="built_in">console</span>.log( chalk.red.bold( <span class="string">"Using __dirname:"</span> ) );</div><div class="line"><span class="built_in">console</span>.log( path.join( __dirname, <span class="string">"data.txt"</span> ) );</div><div class="line"><span class="built_in">console</span>.log( chalk.dim( fileSystem.readFileSync( path.join( __dirname, <span class="string">"data.txt"</span> ) ) ) );</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log( <span class="string">""</span> );</div><div class="line"></div><div class="line"><span class="comment">// The require.resolve() method uses the same mechanics for locating a module (ie, the</span></div><div class="line"><span class="comment">// thing you normally "require"); but, instead of loading it, .resolve() returns the</span></div><div class="line"><span class="comment">// calculated path to the given module. And, since require() can use module-relative</span></div><div class="line"><span class="comment">// paths, so can require.resolve().</span></div><div class="line"><span class="built_in">console</span>.log( chalk.red.bold( <span class="string">"Using require.resolve():"</span> ) );</div><div class="line"><span class="built_in">console</span>.log( <span class="built_in">require</span>.resolve( <span class="string">"./data.txt"</span> ) );</div><div class="line"><span class="built_in">console</span>.log( chalk.dim( fileSystem.readFileSync( <span class="built_in">require</span>.resolve( <span class="string">"./data.txt"</span> ) ) ) );</div></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘åªä½¿ç”¨è¿™ä¸¤ç§ä¸åŒçš„æ–¹å¼æ‰¾åˆ°å¹¶è¯»å…¥æ–‡ä»¶ã€‚ç„¶åï¼Œå½“æˆ‘ä»¬ä»æ ¹ç›®å½•çš„ <code>node</code> åº”ç”¨è¿è¡Œæ—¶ï¼Œå¾—åˆ°ä¸‹å›¾çš„è¾“å‡ºï¼š</p>
<p><img src="https://www.bennadel.com/resources/uploads/2017/node-require-resolve-existing-file.png" alt=""></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œä¸¤ç§æ–¹æ³•ä½¿ç”¨ç›¸å¯¹äºæ¨¡å—çš„è·¯å¾„ç”Ÿæˆäº†ç›¸åŒçš„ç»å¯¹è·¯å¾„ã€‚è€Œä¸”ä¸¤ç§æ–¹æ³•éƒ½å¯ä»¥è¯»å–æ–‡ä»¶çš„å†…å®¹ã€‚</p>
<p>èµ·åˆï¼Œçœ‹ä¸Šå»åœ¨ç”Ÿæˆç›¸å¯¹äºæ¨¡å—çš„æ–‡ä»¶è·¯å¾„ä¸Šä¸¤ç§éƒ½å¯ä»¥ã€‚ä½† <code>require.resolve()</code> æœ‰ä¸€äº›å¾ˆé‡è¦çš„æ³¨æ„ç‚¹ã€‚ä¸€å¼€å§‹ï¼Œå®ƒä¼šå’Œæ–‡ä»¶ç³»ç»Ÿäº¤äº’ã€‚å› ä¸º <code>require.resolve()</code> ä½¿ç”¨å’Œ <code>require()</code> ä¸€æ ·çš„æ¨¡å—è§£æç®—æ³•ï¼Œå®ƒå®é™…ä¸Šåœ¨å®šä½æ¨¡å—ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä¼šæŸ¥æ‰¾æ–‡ä»¶ç³»ç»Ÿæ¥ç¡®è®¤æ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€‚è¿™ä¼šå¢åŠ å¤„ç†è´Ÿæ‹…(å¤§æ¦‚æ¯” <code>__dirname</code> æ–¹æ³•è¦å¤š)ã€‚è¿˜æœ‰éšä¹‹è€Œæ¥çš„ç¬¬äºŒä¸ªæ³¨æ„ç‚¹ï¼šå®ƒåªèƒ½ç”¨äºå­˜åœ¨çš„æ–‡ä»¶ã€‚è¿™æ„å‘³ç€ï¼Œä¸èƒ½ç”¨ <code>require.resolve()</code> æ¥äº§ç”Ÿç›¸å¯¹äºæ¨¡å—çš„æ–‡ä»¶è·¯å¾„ä»¥ä¿å­˜æ–°æ–‡ä»¶ã€‚</p>
<p>ä¸ºäº†è®²æ¸…æˆ‘çš„æ„æ€ï¼Œæˆ‘å°†æ›´æ–°ä¸Šä¾‹ï¼ŒåŠ å…¥ä¸€ä¸ªå¤šä½™çš„è°ƒç”¨æ¥è§£æä¸€ä¸ªå¹¶ä¸å­˜åœ¨çš„ç›¸å¯¹äºæ¨¡å—çš„æ–‡ä»¶è·¯å¾„ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Require the core node modules.</span></div><div class="line"><span class="keyword">var</span> chalk = <span class="built_in">require</span>( <span class="string">"chalk"</span> );</div><div class="line"><span class="keyword">var</span> fileSystem = <span class="built_in">require</span>( <span class="string">"fs"</span> );</div><div class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>( <span class="string">"path"</span> );</div><div class="line"></div><div class="line"><span class="comment">// ----------------------------------------------------------------------------------- //</span></div><div class="line"><span class="comment">// ----------------------------------------------------------------------------------- //</span></div><div class="line"></div><div class="line"><span class="comment">// Executing a no-op call to resolve a module-local file path to a non-existent file</span></div><div class="line"><span class="comment">// in order to demonstrate that this is doing more than just calculating file paths.</span></div><div class="line"><span class="built_in">require</span>.resolve( <span class="string">"./my-new-file.txt"</span> );</div><div class="line"></div><div class="line"><span class="comment">// ----------------------------------------------------------------------------------- //</span></div><div class="line"><span class="comment">// ----------------------------------------------------------------------------------- //</span></div><div class="line"></div><div class="line"><span class="comment">// Traditionally, I have used the "__dirname" as a way to calculate module-relative</span></div><div class="line"><span class="comment">// paths since "__dirname" provides the absolute path to the current module directory.</span></div><div class="line"><span class="comment">// That way, any relative-path appended to the "__dirname" generates a module-relative</span></div><div class="line"><span class="comment">// path to the given location.</span></div><div class="line"><span class="built_in">console</span>.log( chalk.red.bold( <span class="string">"Using __dirname:"</span> ) );</div><div class="line"><span class="built_in">console</span>.log( path.join( __dirname, <span class="string">"data.txt"</span> ) );</div><div class="line"><span class="built_in">console</span>.log( chalk.dim( fileSystem.readFileSync( path.join( __dirname, <span class="string">"data.txt"</span> ) ) ) );</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log( <span class="string">""</span> );</div><div class="line"></div><div class="line"><span class="comment">// The require.resolve() method uses the same mechanics for locating a module (ie, the</span></div><div class="line"><span class="comment">// thing you normally "require"); but, instead of loading it, .resolve() returns the</span></div><div class="line"><span class="comment">// calculated path to the given module. And, since require() can use module-relative</span></div><div class="line"><span class="comment">// paths, so can require.resolve().</span></div><div class="line"><span class="built_in">console</span>.log( chalk.red.bold( <span class="string">"Using require.resolve():"</span> ) );</div><div class="line"><span class="built_in">console</span>.log( <span class="built_in">require</span>.resolve( <span class="string">"./data.txt"</span> ) );</div><div class="line"><span class="built_in">console</span>.log( chalk.dim( fileSystem.readFileSync( <span class="built_in">require</span>.resolve( <span class="string">"./data.txt"</span> ) ) ) );</div></pre></td></tr></table></figure>
<p>å¦‚ä½ æ‰€è§ï¼Œæˆ‘è¯•å›¾è§£æä¸€ä¸ªå¹¶ä¸å­˜åœ¨ç›¸å¯¹äºæ¨¡å—çš„æ–‡ä»¶çš„è·¯å¾„, å³ <code>my-new-file.txt</code>ã€‚è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="https://www.bennadel.com/resources/uploads/2017/node-require-resolve-non-existing-file.png" alt=""></p>
<p>å¦‚ä½ æ‰€è§ï¼Œæ•´ä¸ª demo å´©æºƒå°±æ˜¯å› ä¸ºæˆ‘ä»¬è¯•å›¾è§£æä¸€ä¸ªä¸å­˜åœ¨çš„æ–‡ä»¶çš„è·¯å¾„ã€‚æ¨¡å—è§£æç®—æ³•å†’æ³¡ä¼¼åœ°å±•ç¤ºå‡ºæ¥äº†ã€‚</p>
<p>å¾ˆæ˜æ˜¾ï¼Œ<code>require.resolve()</code> æ‰€åšçš„è¿œä¸æ­¢ç”Ÿæˆæ–‡ä»¶è·¯å¾„é‚£ä¹ˆç®€å•â€“å®ƒå®é™…ä¸Šåœ¨å’Œæ–‡ä»¶ç³»ç»Ÿäº¤äº’ã€‚æ­£å› å¦‚æ­¤ï¼Œå®ƒä¼šå¸¦æ¥æ›´å¤§çš„å¤„ç†è´Ÿæ‹…ï¼Œåœ¨ä½¿ç”¨æ–¹å¼ä¸Šä¹Ÿæœ‰ä¸€äº›é™åˆ¶ã€‚ä½†æ˜¯ï¼Œå®ƒèƒ½æä¾›ä¸€ç§æ›´è‡ªç„¶çš„è®¡ç®—ç›¸å¯¹äºæ¨¡å—çš„æ–‡ä»¶è·¯å¾„çš„æ–¹å¼ã€‚æ‰€ä»¥ï¼Œæˆ‘æƒ³å¯èƒ½åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹æˆ‘ä¸ä¼šç”¨è¿™ç§æ–¹æ³•ï¼Œä½†ç”¨æ¥è¯»å–åƒè®¾ç½®æ–‡ä»¶é‚£æ ·çš„ï¼Œåªè¯»ä¸€æ¬¡çš„æ–‡ä»¶ï¼Œè¿˜æ˜¯ä¸é”™çš„ã€‚</p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/ç¿»è¯‘/">ç¿»è¯‘</a>
    </span>
    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2017/05/03/using-resolve-to-calculate-module-relative-file-paths/#comment">Comments</a>
        </span>
      </span>
    </div>
    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2016/11/26/ç®€åŒ–äº‹ä»¶ç›‘å¬å‡½æ•°å†™æ³•/"><span>ç®€åŒ–äº‹ä»¶ç›‘å¬å‡½æ•°å†™æ³•</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2016/11/26/ç®€åŒ–äº‹ä»¶ç›‘å¬å‡½æ•°å†™æ³•/" rel="bookmark">
        <time class="entry-date published" datetime="2016-11-26T01:07:19.000Z">
          2016-11-26
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>ç›¸æ¯”jQueryæˆ–è€…zepto, åŸç”Ÿjsçš„å†™æ³•æœ‰æ—¶å¤ªè¿‡ç¹çã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€åŒ–ç›‘å¬å‡½æ•°çš„å†™æ³•çš„å°æŠ€å·§ã€‚</p>
<p>ä»ç®€å•çš„å¼€å§‹ï¼Œæ¯”å¦‚<code>console.log</code>, å¯ä»¥å†™æˆ<code>const log = console.log</code></p>
<p>ç”¨è¿™ä¸ªæ€è·¯ç®€åŒ–äº‹ä»¶ç›‘å¬å‡½æ•°:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> listen = EventTarget.addEventListener</div></pre></td></tr></table></figure>
<p>è¿™é‡Œ<code>EventTarget</code>éœ€è¦ä¿®æ”¹æˆç›®æ ‡å…ƒç´ ï¼Œæƒ³åˆ°ä½¿ç”¨<code>call/apply</code>ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">listen.call(targetElement, <span class="string">"click"</span>, event =&gt; &#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<blockquote>
<p><code>call/apply</code>å¯ä»¥ç”¨æ¥æ”¹å˜æ‰§è¡Œæ—¶<code>this</code>çš„æŒ‡å‘ã€‚</p>
</blockquote>
<p>è¿™æ ·è¿˜æ˜¯è¦æ¯æ¬¡éƒ½å†™<code>call</code>, è¿™ç§ç®€åŒ–è¿˜æ˜¯ä¸å¤Ÿç†æƒ³, æ˜¯æ—¶å€™ç¥­å‡º<code>bind</code> â€“ å®ƒå¯ä»¥ç»‘å®š<code>this</code>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> listen = <span class="built_in">Function</span>.prototype.call.bind(<span class="built_in">document</span>.addEventListener)</div><div class="line"></div><div class="line">listen(targetElement, <span class="string">"click"</span>, event =&gt; &#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>ç®€åŒ–è‡³æ­¤å®Œæˆï¼Œæ•ˆæœè¿˜å¯ä»¥ğŸ˜Šã€‚</p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/åŸåˆ›/">åŸåˆ›</a>
    </span>
    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2016/11/26/ç®€åŒ–äº‹ä»¶ç›‘å¬å‡½æ•°å†™æ³•/#comment">Comments</a>
        </span>
      </span>
    </div>
    
  </div>
</article>




<nav class="pagination">
  
  
</nav>
    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2017 XGZ
    
  </p>
</footer>
    
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-72216159-4', 'auto');
    ga('send', 'pageview');

</script>

  </div>
</div>
</body>
</html>